# YM2610 to YM2612 Converter - Release Notes v1.1

## 版本 1.1 - 2026-02-04

### 🎯 主要改进

#### 1. 优化采样率和文件大小
- **降低采样率**: 从 44.1kHz 降至 22.05kHz
- **文件大小减少 50%**: 从 7.5MB 降至 3.8MB（以 Illusion.vgm 为例）
- **硬件兼容性提升**: 减少 PCM 写入命令，适合硬件播放器

#### 2. 音量优化
- **PCM 音量提升**: 从 75% 提升至 150%
- **更好的音频平衡**: PCM 和 FM 音量更协调
- **避免削波**: FM 音量保持 1/8，防止混音削波

#### 3. 代码清理
- **删除 ADPCMDecoder**: 移除手动实现的 ADPCM 解码器
- **使用 libvgm 渲染**: 确保 100% 准确的 ADPCM 解码
- **简化代码结构**: 更易维护和理解

### 📊 性能对比

| 项目 | v1.0 (44.1kHz) | v1.1 (22.05kHz) | 改进 |
|------|----------------|-----------------|------|
| 文件大小 | 7.5 MB | 3.8 MB | -50% |
| PCM 命令数 | ~1,953,733 | ~976,866 | -50% |
| 音频质量 | 优秀 | 良好 | 适中 |
| 硬件兼容性 | 中等 | 优秀 | +++ |

### 🔧 技术细节

#### vgm2wav_adpcm_only 设置
```cpp
sample_rate = 22050;      // 降低采样率
pCfg.masterVol = 0x18000; // 150% 音量 (1.5x)
```

#### 文件大小计算
```
原始 YM2610 VGM: 260 KB
↓
转换后 YM2612 VGM (44.1kHz): 7.5 MB (29x)
转换后 YM2612 VGM (22.05kHz): 3.8 MB (15x)
```

### 🎵 音频质量说明

- **22.05kHz 采样率**: 对于 ADPCM 音频（主要是鼓声和音效）完全足够
- **FM 通道**: 不受影响，保持原始质量
- **整体效果**: 在硬件播放器上表现更好，文件更小

### 🚀 使用方法

#### 基本转换（推荐设置）
```bash
# 1. 提取 ADPCM (22.05kHz, 150% 音量)
vgm2wav_adpcm_only.exe input.vgm adpcm.wav

# 2. 转换为 YM2612
vgm_converter.exe input.vgm adpcm.wav output.vgm
```

#### 自定义采样率（可选）
```bash
# 使用 44.1kHz（更高质量，更大文件）
vgm2wav_adpcm_only.exe --samplerate=44100 input.vgm adpcm.wav

# 使用 11.025kHz（更小文件，较低质量）
vgm2wav_adpcm_only.exe --samplerate=11025 input.vgm adpcm.wav
```

### 📝 升级说明

从 v1.0 升级到 v1.1：
1. 替换 `vgm2wav_adpcm_only.exe`
2. 替换 `vgm_converter.exe`
3. 重新转换现有文件以获得更小的文件大小

### 🐛 已修复问题

- ✅ 修复 PCM 无声音问题（添加 0x53 0xB6 0xC0 命令）
- ✅ 删除不准确的 ADPCM 解码器
- ✅ 优化文件大小和硬件兼容性

### 🔮 未来计划

- [ ] 支持 ZIP/VGZ 批量转换
- [ ] 自动通道映射优化
- [ ] 更多采样率预设
- [ ] GUI 界面

---

**发布日期**: 2026-02-04
**版本**: 1.1
**状态**: 稳定版
